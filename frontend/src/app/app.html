<header class="text-3xl m-3">Randomized Weather App</header>
<hr />
<form class="m-6" [formGroup]="formControls">
  <label class="block">
    <span class="inline-block w-16">City</span>
    <input id="city" class="border-b border-gray-400" placeholder="City" formControlName="city" />
  </label>
  <label class="block">
    <span class="inline-block w-16">State</span>
    <input
      id="state"
      class="border-b border-gray-400"
      placeholder="State"
      formControlName="state"
    />
  </label>
  <label class="block">
    <span class="inline-block w-16">Zip</span>
    <input id="zip" class="border-b border-gray-400" placeholder="Zip" formControlName="zip" />
  </label>
</form>

<hr />
<div class="flex flex-wrap m-6">
  <button class="inline-block rounded-lg p-3 border mx-3" (click)="refresh$.next()">Refresh</button>
  <button
    class="inline-block rounded-lg p-3 border mx-3"
    (click)="addLocation()"
    [disabled]="!formControls.valid"
  >
    Add +
  </button>
</div>
<hr />
<div class="flex flex-wrap m-6 justify-center">
  @for (card of weatherCities(); track card.id) {
  <div class="card relative rounded-2xl border-2 m-1 p-2 w-sm">
    <button class="w-2 h-2 absolute right-2 top-0" (click)="removeLocation(card.id)">X</button>
    <table class="w-full">
      <tr>
        <th class="text-right w-[9em] max-w-[40vw]">City</th>
        <td class="px-4">{{ card.city }}, {{ card.state }}</td>
      </tr>
      <tr>
        <th class="text-right w-[9em] max-w-[40vw]">Zip</th>
        <td class="px-4">{{ card.zip }}</td>
      </tr>
      <tr>
        <th class="text-right w-[9em] max-w-[40vw]">Temp</th>
        <td class="px-4">{{ card.temperature }} °{{ unitOfMeasure }}</td>
      </tr>
      <tr>
        <th class="text-right w-[9em] max-w-[40vw]">Cloud Coverage</th>
        <td class="px-4">{{ card.cloudCoverage }} %</td>
      </tr>
      <tr>
        <th class="text-right w-[9em] max-w-[40vw]">Wind</th>
        <td class="px-4">{{ card.windSpeed }} mph @ {{ card.windDirection }}°</td>
      </tr>
      <tr>
        <th class="text-right w-[9em] max-w-[40vw]">12 month avg</th>
        <td class="px-4">{{ card.rolling12MonthAvg }} °{{ unitOfMeasure }}</td>
      </tr>
    </table>
  </div>
  }
  <div class="mx-1 w-sm"></div>
  <div class="mx-1 w-sm"></div>
  <div class="mx-1 w-sm"></div>
</div>
<hr />
<div class="m-6">
  <app-temperature-chart [weatherData]="weatherCities()"></app-temperature-chart>
</div>
